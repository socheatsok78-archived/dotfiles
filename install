#!/usr/bin/env bash

set -e

DOTFILE_INSTALL_DIR="$HOME/.dotfile"

function check_dotfile () {
    if [ -d "$DOTFILE_INSTALL_DIR" ]; then
        update_repo
    else 
        clone_repo
    fi
}

function clone_repo () {
    echo "Downloading dotfile..."
    git clone git@github.com:socheatsok78/.dotfile.git "$DOTFILE_INSTALL_DIR"
}

function update_repo () {
    cd "$DOTFILE_INSTALL_DIR"
    git pull --rebase --stat origin master
}

function install_dotfile () {
    echo "Installing dotfile..."
    cd "$DOTFILE_INSTALL_DIR"
    make && make install
}


function main () {
    check_dotfile
    install_dotfile
}

# Entrypoint
main;
